<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Disclaimer</span></a></li>
      <li><a href="_xE9_xA6_x96_xE9_xA1_xB5.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_s_d_k_xE7_x89_x88_xE6_x9C_xAC_xE6_x9B_xB4_xE6_x96_xB0_xE8_xAE_xB0_xE5_xBD_x95.html"><span>Update&#160;History</span></a></li>
      <li><a href="usergroup0.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference&#160;and&#160;Data&#160;Structure</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F.html"><span>Sample&#160;Program</span></a></li>
      <li><a href="_error_code.html"><span>Error&#160;Code</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Control Frame Grabbers</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">The process of controlling frame grabbers includes enumerating, opening/closing, and configuring frame grabbers. </div><div id="hikvision"> <ul>
<li>
<a href="#meijucaijika" class="el">Enumerate Frame Grabbers</a> </li>
<li>
<a href="#dakaicaijika" class="el">Open Frame Grabbers</a> </li>
<li>
<a href="#guanbicaijika" class="el">Close Frame Grabbers</a> </li>
<li>
<a href="#peizhicaijika" class="el">Configure Frame Grabbers</a> </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="meijucaijika" class="title">Enumerate Frame Grabbers</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Steps:</div><div id="hikvision"> <ol>
<li>
<p class="startli">Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga4b276232c23a21b0e6e57ad5a5104f33" title="Update frame grabber list.">MV_FG_UpdateInterfaceList()</a> and input frame grabber type parameter <em>nTLayerType</em> to enumerate frame grabbers of a specified type (supports enumerating multiple types at the same time). The returned parameter <em>pbChanged</em> marks whether the frame grabber list is updated: true-updated, false-unchanged.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gadc46becbe6035a2fb5283ad1fb6b698c" title="Get the number of frame grabbers.">MV_FG_GetNumInterfaces()</a> to get the number of frame grabbers. The returned parameter <em>pnNumIfaces</em> marks the number of frame grabbers of a specified type connected to the PC. If the number is N, then there are N enumerated frame grabbers, and you can access frame grabbers within the index range [0,N-1].</p>
<p class="endli"></p>
</li>
<li>
Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga568d936f246163171ba7c7512462ae82" title="Get the frame grabber information via frame grabber index.">MV_FG_GetInterfaceInfo()</a> to get the information of a frame grabber by its index, and save the information in the structure <a class="el" href="struct_m_v___f_g___i_n_t_e_r_f_a_c_e___i_n_f_o.html">MV_FG_INTERFACE_INFO</a>, which will be returned in the output. You can identify different types of frame grabbers by the parameter <em>nTLayerType</em> in the structure. <br />
 The sample codes below show the process of enumerating frame grabbers: <br />
 <div class="fragment"><div class="line"><span class="comment">/*Initialize running environment*/</span></div><div class="line"><a class="code" href="group___xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE5_x8F_x8A_xE9_x87_x8A_xE6_x94_xBE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga255dee05a5fb8b3a99fb1e6ef8aa2efb">MV_FG_Initialize</a>();</div><div class="line"></div><div class="line"><span class="comment">/*Update frame grabber list*/</span></div><div class="line"><span class="keywordtype">bool</span> bChanged = <span class="keyword">false</span>;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga4b276232c23a21b0e6e57ad5a5104f33">MV_FG_UpdateInterfaceList</a>(<a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gab9b05f0522e4b358ed02c8bff9b5a46c">MV_FG_CXP_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gadad33b1e17a74130be022c10652b7912">MV_FG_GEV_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gab660cf959a9999fbb80d14a6db6e774e">MV_FG_CAMERALINK_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gaf423222ebdc08a2fa1cc09f2ab414237">MV_FG_XoF_INTERFACE</a>, &amp;bChanged);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Get the number of frame grabbers*/</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nInterfaceNum = 0;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gadc46becbe6035a2fb5283ad1fb6b698c">MV_FG_GetNumInterfaces</a>(&amp;nInterfaceNum);</div><div class="line">Check(nRet);</div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nInterfaceNum; i++)</div><div class="line">{</div><div class="line">    <span class="comment">/*Get frame grabber information by index*/</span></div><div class="line">    <a class="code" href="struct_m_v___f_g___i_n_t_e_r_f_a_c_e___i_n_f_o.html">MV_FG_INTERFACE_INFO</a> stInterfaceInfo = { 0 };</div><div class="line">    nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga568d936f246163171ba7c7512462ae82">MV_FG_GetInterfaceInfo</a>(i, &amp;stInterfaceInfo);</div><div class="line">    Check(nRet);</div><div class="line">    <span class="comment">// TODO: Process frame grabber information</span></div><div class="line">}</div></div><!-- fragment -->  </li>
</ol>
</div><div id="hikvision">After closing all frame grabbers of the specified type, you can call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gaac380fba062d812b41f22b33dec5ba27" title="Release frame grabber resources of a specified type.">MV_FG_ReleaseTLayerResource()</a> to release the resources occupied by them.</div><div id="hikvision"> <div class="fragment"><div class="line"><span class="comment">/*Release frame grabber resources of a specified type*/</span></div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gaac380fba062d812b41f22b33dec5ba27">MV_FG_ReleaseTLayerResource</a>(<a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gab9b05f0522e4b358ed02c8bff9b5a46c">MV_FG_CXP_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gadad33b1e17a74130be022c10652b7912">MV_FG_GEV_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gab660cf959a9999fbb80d14a6db6e774e">MV_FG_CAMERALINK_INTERFACE</a> | <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gaf423222ebdc08a2fa1cc09f2ab414237">MV_FG_XoF_INTERFACE</a>);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="dakaicaijika" class="title">Open Frame Grabbers</div> </div> </div> <div id="hikvision"> <br />
 <ul>
<li>
Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga92dda0377f4e7bca95a93fcc22390f31" title="Open the frame grabber.">MV_FG_OpenInterface()</a> and input <em>nIndex</em> to open certain frame grabber. A frame grabber handle will be returned after opening it, which can be used for the follow-up operations such as configuration, enumeration, and event acquisition. <br />
 <div class="fragment"><div class="line"><span class="comment">/*Open a frame grabber*/</span></div><div class="line"><a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga365c8ff08ed6aa7fb24dfe0d28109f29">IFHANDLE</a> hInterface = NULL;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga92dda0377f4e7bca95a93fcc22390f31">MV_FG_OpenInterface</a>(nInterfaceIndex, &amp;hInterface);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// TODO: Configure the frame grabber, enumerate the cameras, etc.</span></div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5321b2bb5c4a08331de9261a7113562f" title="Open the frame grabber and specify its access mode.">MV_FG_OpenInterfaceEx()</a>, input <em>nIndex</em>, and specify access mode to open the frame grabber. Access modes include read-only permission and control permission. Read-only permission only allows reading from the frame grabber, but cannot write to it. Control permission allows reading and writing. <br />
 <div class="fragment"><div class="line"><span class="comment">/*Open the frame grabber and specify an access mode*/</span></div><div class="line"><a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga365c8ff08ed6aa7fb24dfe0d28109f29">IFHANDLE</a> hInterface = NULL;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5321b2bb5c4a08331de9261a7113562f">MV_FG_OpenInterfaceEx</a>(nInterfaceIndex, <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga6720ac712de8d80dce736099fffce026">MV_FG_ACCESS_CONTROL</a>, &amp;hInterface);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// TODO: Configure the frame grabber, enumerate the cameras, etc. </span></div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga3ed44eddd53e14c712ef5d550b43658c" title="Open the frame grabber with its ID and specify its access mode.">MV_FG_OpenInterfaceByID()</a>, input framer grabber ID, and specify access mode to open the frame grabber. With this API, you can skip the enumeration process, but you need to get the frame grabber ID in advance. The frame grabber ID consists of model No., serial No., and PCIe No, separating by "-". When entering the frame grabber ID, fuzzy search is supported, which means that only an unique identity information is required, such as the serial No. or the PCIe No. <br />
 <div class="fragment"><div class="line"><span class="comment">/*Open the frame grabber by its ID and specify an access mode*/</span></div><div class="line"><a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga365c8ff08ed6aa7fb24dfe0d28109f29">IFHANDLE</a> hInterface = NULL;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga3ed44eddd53e14c712ef5d550b43658c">MV_FG_OpenInterfaceByID</a>(<span class="stringliteral">&quot;SerialNumber&quot;</span>, <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga6720ac712de8d80dce736099fffce026">MV_FG_ACCESS_CONTROL</a>, &amp;hInterface);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// TODO: Configure the frame grabber, enumerate the cameras, etc. </span></div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gac418c88d8352ed61cfea8baba66d107b">MV_FG_OpenInterfaceWithConfig()</a>, input <em>nIndex</em>, and import a configuration file to open the frame grabber. The configuration file comes from <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#gaab03fe32ea14ec3a158dd39537b521b0" title="Save camera features.">MV_FG_FeatureSave()</a>. It is optional to import a configuration file, and the parameter <em>pcConfigFile</em> can be NULL. You can choose whether to import it as needed. <br />
 <div class="fragment"><div class="line"><span class="comment">/*Open the frame grabber and import a configuration file*/</span></div><div class="line"><a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga365c8ff08ed6aa7fb24dfe0d28109f29">IFHANDLE</a> hInterface = NULL;</div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#gac418c88d8352ed61cfea8baba66d107b">MV_FG_OpenInterfaceWithConfig</a> (nInterfaceIndex, <span class="stringliteral">&quot;ConfigFileName&quot;</span>, &amp;hInterface);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// TODO: Configure the frame grabber, enumerate the cameras, etc.</span></div></div><!-- fragment -->  </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="guanbicaijika" class="title">Close Frame Grabbers</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Call <a class="el" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga34133899f81836e2bef39d91b2e242a4" title="Close the frame grabber.">MV_FG_CloseInterface()</a> and input the corresponding handle of the frame grabber to close it. Note that when the frame grabber is closed, the previous handle will become invalid and cannot be used to call other APIs.</div><div id="hikvision"> <div class="fragment"><div class="line"><span class="comment">/*Close the frame grabber*/</span></div><div class="line">nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE6_x8E_xA5_xE5_x8F_xA3.html#ga34133899f81836e2bef39d91b2e242a4">MV_FG_CloseInterface</a>(hInterface);</div><div class="line">hInterface = NULL;</div><div class="line">Check(nRet);</div></div><!-- fragment --> <br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="peizhicaijika" class="title">Configure Frame Grabbers</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Refer to <a class="el" href="_xE9_x85_x8D_xE7_xBD_xAE_xE5_x8F_x82_xE6_x95_xB0.html">Configure Parameters</a>. </div><div id="hikvision"> <br />
 </div> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>