<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Disclaimer</span></a></li>
      <li><a href="_xE9_xA6_x96_xE9_xA1_xB5.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_s_d_k_xE7_x89_x88_xE6_x9C_xAC_xE6_x9B_xB4_xE6_x96_xB0_xE8_xAE_xB0_xE5_xBD_x95.html"><span>Update&#160;History</span></a></li>
      <li><a href="usergroup0.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference&#160;and&#160;Data&#160;Structure</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F.html"><span>Sample&#160;Program</span></a></li>
      <li><a href="_error_code.html"><span>Error&#160;Code</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Process Images</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">The SDK provides a series of APIs for image processing after acquiring the images from the camera. These APIs can be called with frame grabber handle, camera handle, or stream handle.</div><div id="hikvision"> <ul>
<li>
<a href="#xianshituxiang" class="el">Display Images</a> </li>
<li>
<a href="#baocuntuxiang" class="el">Save Images</a> </li>
<li>
<a href="#xiangsugeshizhuanhuan" class="el">Convert Pixel Formats</a> </li>
<li>
<a href="#jiematuxiang" class="el">Decode Images</a> </li>
<li>
<a href="#chongzutuxiang" class="el">Reconstruct Images</a> </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="xianshituxiang" class="title">Display Images</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">To display an image, call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga88588e40c4e1f6dcb4f03c6bdeae09b4" title="Display one frame of image.">MV_FG_DisplayOneFrame()</a> and input the window handle and the image information of the image to be displayed. The image information includes width, height, pixel format, and image data. Note that displaying images is time-consuming, so it is recommended to use asynchronous methods, otherwise it may affect the timeliness of streaming or cause streaming callback blocking. Besides, due to factors such as poor motherboard performance, high CPU usage, or high camera frame rate, there may be situations where not all images can be displayed at full frame rate.</div><div id="hikvision"> <br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="baocuntuxiang" class="title">Save Images</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">The SDK supports saving images in four formats: BMP, JPEG, TIFF, and PNG.</div><div id="hikvision"> <ul>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gad20737201aca2cfa4b73774cf6dd90dd" title="Save the BMP image.">MV_FG_SaveBitmap()</a> and input image information to convert the image to BMP format and save it to the buffer. Note that the current SDK only supports saving 8-bit Mono8 grayscale images, 24-bit BGR24 color images, and 32-bit BGRA32 color images. Images in other formats will be adaptively converted to one of these three formats before being saved. When inputting images in Bayer format, several interpolation methods are supported. Refer to <a class="el" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ga144b912aa1e44f1413da6bcee68fc144">MV_FG_CFA_METHOD</a> for details.<br />
 The following sample codes show the process of saving an image in BMP format: <br />
 <div class="fragment"><div class="line"><span class="comment">/*Save in BMP format*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html">MV_FG_SAVE_BITMAP_INFO</a> stSaveBitmapInfo = {0};</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a>;</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line"></div><div class="line"><span class="comment">/*The output buffer size should be set based on the actual image saving format. For example, for Bayer format, it will first be converted to BGR24 format, so the output buffer size should be width * height * 3 + BMP header length; if converted to Mono8 format, there is no need to multiply by 3.*/</span></div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#af94a4545a8863496b000eab32acd88fb">nBmpBufSize</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> * stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> * 3 + 1024;</div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#a9f2a6565a153e1c47d27b214bf98f2a6">pBmpBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#af94a4545a8863496b000eab32acd88fb">nBmpBufSize</a>);</div><div class="line"></div><div class="line"><span class="comment">/*For Bayer format, input an interpolation method*/</span></div><div class="line">stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#a7c510d92014729fb4e05916a04ae5ebe">enCfaMethod</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga43ecafe80a7f8258da82fbeb3f13c340ac26e37b9b9b1b3bd7f607e21437f5ddc">MV_FG_CFA_METHOD_OPTIMAL</a>;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gad20737201aca2cfa4b73774cf6dd90dd">MV_FG_SaveBitmap</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stSaveBitmapInfo);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Write the BMP image to a file*/</span></div><div class="line">FILE* fp = fopen(<span class="stringliteral">&quot;./Image.bmp&quot;</span>, <span class="stringliteral">&quot;wb+&quot;</span>);</div><div class="line"><span class="keywordflow">if</span> (fp)</div><div class="line">{</div><div class="line">    fwrite(stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#a9f2a6565a153e1c47d27b214bf98f2a6">pBmpBuf</a>, stSaveBitmapInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___b_i_t_m_a_p___i_n_f_o.html#ac8167f886425bd7338103770eb7d2072">nBmpBufLen</a>, 1, fp);</div><div class="line">    fclose(fp);</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gacf27f8d76b7348812708b07e68f5ceba" title="Save the JPEG image.">MV_FG_SaveJpeg()</a> and input image information to encode the image into JPEG format and save it to the buffer. JPEG encoding is lossy, and the SDK provides encoding quality parameters with a range of (0,100]. Note that the current SDK only supports JPEG encoding for 8-bit Mono8 grayscale images, 24-bit BGR24 color images, and 32-bit BGRA32 color images. Images in other formats will be adaptively converted to one of these three formats before encoding. When inputting images in Bayer format, several interpolation methods are supported. Refer to <a class="el" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ga144b912aa1e44f1413da6bcee68fc144">MV_FG_CFA_METHOD</a> for details. <br />
 The following sample codes show the process of saving an image in JPEG format:<br />
 <div class="fragment"><div class="line"><span class="comment">/*Save in JPEG format*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html">MV_FG_SAVE_JPEG_INFO</a> stSaveJpegInfo = {0};</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a>;</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line"></div><div class="line"><span class="comment">/*The output buffer size should be set based on the actual image saving format. For example, for Bayer format, it will first be converted to BGR24 format, so the output buffer size should be width * height * 3 + BMP header length; if converted to Mono8 format, there is no need to multiply by 3.*/</span></div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a176a593fb1083db3c2eb1ff2860ee8a6">nJpgBufSize</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> * stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> * 3 + 1024;</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a9e46d50a0344900e97987966ae06060b">pJpgBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a176a593fb1083db3c2eb1ff2860ee8a6">nJpgBufSize</a>);</div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a170032d0a182885306c74447a51212b5">nJpgQuality</a> = 80;</div><div class="line"></div><div class="line"><span class="comment">/*For Bayer format, input an interpolation method */</span></div><div class="line">stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a7c510d92014729fb4e05916a04ae5ebe">enCfaMethod</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga43ecafe80a7f8258da82fbeb3f13c340ac26e37b9b9b1b3bd7f607e21437f5ddc">MV_FG_CFA_METHOD_OPTIMAL</a>;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gacf27f8d76b7348812708b07e68f5ceba">MV_FG_SaveJpeg</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stSaveJpegInfo);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Write the JPEG image to a file*/</span></div><div class="line">FILE* fp = fopen(<span class="stringliteral">&quot;./Image.jpeg&quot;</span>, <span class="stringliteral">&quot;wb+&quot;</span>);</div><div class="line"><span class="keywordflow">if</span> (fp)</div><div class="line">{</div><div class="line">    fwrite(stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a9e46d50a0344900e97987966ae06060b">pJpgBuf</a>, stSaveJpegInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___j_p_e_g___i_n_f_o.html#a9b9d2514ccc295031dfa9cf9ee73d310">nJpgBufLen</a>, 1, fp);</div><div class="line">    fclose(fp);</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga0377193a3455a2a40469b2e3d2ba226a" title="Save the TIFF Image.">MV_FG_SaveTiffToFile()</a> and input image information to convert the image to TIFF format and save it to a file. The SDK will save images separately based on the number of channels and the number of bits per channel. Generally, the data content of the image will not be changed. For example, when Bayer RG8 images are saved in TIFF format, they will be saved in 1-channel and 8-bit mode without color interpolation. When saving images, the horizontal and vertical resolutions of the TIFF format can be adjusted according to the actual situation.<br />
 The following sample codes show the process of saving an image in TIFF format:<br />
 <div class="fragment"><div class="line"><span class="comment">/*Save in TIFF format*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html">MV_FG_SAVE_TIFF_TO_FILE_INFO</a> stSaveTiffInfo = {0};</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#ab72477b4420b2a07dfd2c9fe03ee41c2">pcImagePath</a> = <span class="stringliteral">&quot;./Image.tiff&quot;</span>;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#ab30a83239ae8bd2f4d5206051e9530a1">fXResolution</a>= 96.0f;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#a7056426d6708dc381ee8330151a4b564">fYResolution</a>= 96.0f;</div><div class="line">stSaveTiffInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___t_i_f_f___t_o___f_i_l_e___i_n_f_o.html#a60aad6d88bbc43ca41aab0be2a73a825">enResolutionUnit</a>= <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ggaad93f4dd0bea277d8453605326b47769ab538aec6bd9ed09a60144f799e5e0f00">MV_FG_Resolution_Unit_Inch</a>;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga0377193a3455a2a40469b2e3d2ba226a">MV_FG_SaveTiffToFile</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stSaveTiffInfo);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga92949b24dc04fe8099a920d63194a595" title="Save the PNG Image.">MV_FG_SavePngToFile()</a> and input image information to encode the image into PNG format and save it to a file. PNG encoding is lossless, and the SDK provides encoding compression rate parameters with a range of [0,9]. Note that the current SDK only supports PNG encoding for 8-bit Mono8 grayscale images, 24-bit RGB24 color images, and 32-bit RGBA32 color images. Images in other formats will be adaptively converted to one of these three formats before encoding. When inputting images in Bayer format, several interpolation methods are supported. For details, refer to <a class="el" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ga144b912aa1e44f1413da6bcee68fc144">MV_FG_CFA_METHOD</a>.<br />
 The following sample codes show the process of saving an image in PNG format:<br />
 <div class="fragment"><div class="line"><span class="comment">/*Save in PNG format*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html">MV_FG_SAVE_PNG_TO_FILE_INFO</a> stSavePngInfo = {0};</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#ab72477b4420b2a07dfd2c9fe03ee41c2">pcImagePath</a> = <span class="stringliteral">&quot;./Image.png&quot;</span>;</div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#a69df0ef8b1128c52fb5e76fced8cbc17">nPngCompression</a> = 8;</div><div class="line"></div><div class="line"><span class="comment">/*For Bayer format, input an interpolation method*/</span></div><div class="line">stSavePngInfo.<a class="code" href="struct_m_v___f_g___s_a_v_e___p_n_g___t_o___f_i_l_e___i_n_f_o.html#a7c510d92014729fb4e05916a04ae5ebe">enCfaMethod</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga43ecafe80a7f8258da82fbeb3f13c340ac26e37b9b9b1b3bd7f607e21437f5ddc">MV_FG_CFA_METHOD_OPTIMAL</a>;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga92949b24dc04fe8099a920d63194a595">MV_FG_SavePngToFile</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stSavePngInfo);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="xiangsugeshizhuanhuan" class="title">Convert Pixel Format</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaad1d64970f2fcb2f896eb2164a37bcea" title="Convert the pixel format.">MV_FG_ConvertPixelType()</a> and input image information and targeted pixel format to convert pixel format of the image. This API is mainly used to convert the format of the output image from the camera into the actual required format, such as converting YUV422 to RGB, Bayer to RGB/BGR, and Mono12 to Mono16. Note that when interpolating from Bayer to RGB/BGR, this API not only supports selecting an interpolation method, but also supports some algorithm functions, such as smooth filtering, gamma correction, and CCM correction. For details, refer to <a class="el" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html">MV_FG_CONVERT_PIXEL_INFO</a>.</div><div id="hikvision"> <div class="fragment"><div class="line"><span class="comment">/*Convert pixel format. Take Bayer RG8 interpolation as an example.*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html">MV_FG_CONVERT_PIXEL_INFO</a> stConvertPixelInfo = {0};</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ggaf163295ca7ce1c6b384e51346d827b90aceb846981bf786e359d0319d5169856f">MV_FG_PIXEL_TYPE_BayerRG8</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ggaf163295ca7ce1c6b384e51346d827b90a1d87c50f3d4a2ab9ee610bd60c2df3e8">MV_FG_PIXEL_TYPE_RGB8_Packed</a>;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> * stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> * 3;</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a>);</div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a7c510d92014729fb4e05916a04ae5ebe">enCfaMethod</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga43ecafe80a7f8258da82fbeb3f13c340ac26e37b9b9b1b3bd7f607e21437f5ddc">MV_FG_CFA_METHOD_OPTIMAL</a>;</div><div class="line"></div><div class="line"><span class="comment">/*Enable smooth interpolation (only valid for Bayer interpolation)*/</span></div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#ae091d8a57bd36c45837c51b440d883bf">bFilterEnable</a>= TURE;</div><div class="line"></div><div class="line"><span class="comment">/*Set gamma correction (only valid for Bayer interpolation). It is disabled here. Multiple gamma types such as gamma curve and gamma value are supported.*/</span></div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a38a9b0fe62481aa9b5e9fb9c2c2c896a">stGammaInfo</a>.<a class="code" href="struct_m_v___f_g___g_a_m_m_a___i_n_f_o.html#aa7a73de0e9f1190558f87f7574aade7c">enGammaType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga6a32131cf9fd6734a262e995eb1ec2beada69519755d39974788b4ea531c283f7">MV_FG_GAMMA_TYPE_NONE</a>;</div><div class="line"></div><div class="line"><span class="comment">/*Set CCM parameters (only valid for Bayer interpolation). It is disabled here. Different quantized coefficients are supported.*/</span></div><div class="line">stConvertPixelInfo.<a class="code" href="struct_m_v___f_g___c_o_n_v_e_r_t___p_i_x_e_l___i_n_f_o.html#a468c734256b3c715d9a2eae20a62cc07">stCCMInfo</a>.<a class="code" href="struct_m_v___f_g___c_c_m___i_n_f_o.html#af946c96e31b42bcc7b3bedde3f92a276">bCCMEnable</a> = FALSE;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaad1d64970f2fcb2f896eb2164a37bcea">MV_FG_ConvertPixelType</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stConvertPixelInfo);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="jiematuxiang" class="title">Decode Images</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">The SDK supports decoding functions in both HB stream and JPEG image formats.</div><div id="hikvision"> <ul>
<li>
The API <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaadc1870abe7dcfb0142e5a971fb1d6d6" title="Lossless decoding.">MV_FG_HB_Decode()</a> will decode the HB lossless stream data obtained from the camera into raw image data. HB lossless stream data refers to the data that the camera compresses the original image losslessly through algorithms. Users cannot directly use the stream data, and need to first call this API for decoding. Note that this function can improve the camera frame rate and break through the bandwidth limits to some degree, but decoding on the PC is time-consuming and will consume some system resources.<br />
 <div class="fragment"><div class="line"><span class="comment">/*HB lossless decoding*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html">MV_FG_HB_DECODE_PARAM</a> stHBDecode = {0};</div><div class="line">stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a01cabcdb6eb04d42ea699fc45bf21375">pSrcBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a6860d280bb5b78e359935494d503b469">nSrcLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = 0;</div><div class="line">stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = NULL;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaadc1870abe7dcfb0142e5a971fb1d6d6">MV_FG_HB_Decode</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stHBDecode);</div><div class="line"><span class="keywordflow">if</span>(MV_FG_ERR_IMG_OVERFLOW == nRet)</div><div class="line">{</div><div class="line">    stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a>);</div><div class="line">    stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = stHBDecode.<a class="code" href="struct_m_v___f_g___h_b___d_e_c_o_d_e___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a>;</div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaadc1870abe7dcfb0142e5a971fb1d6d6">MV_FG_HB_Decode</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp; stHBDecode);</div><div class="line">    Check(nRet);</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5135cbcd10c00691f06acd9af4a75026" title="JPEG decoding.">MV_FG_DecodeJpeg()</a> to decode JPEG stream data obtained from the camera into image data. The black and white images will be decoded into 8-bit Mono8 grayscale images, and the color images will be decoded into 24-bit RGB24 color images.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Decode JPEG data*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html">MV_FG_DECODE_JPEG_PARAM</a> stDecodeJPEG = {0};</div><div class="line">stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a01cabcdb6eb04d42ea699fc45bf21375">pSrcBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a6860d280bb5b78e359935494d503b469">nSrcLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = 0;</div><div class="line">stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = NULL;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5135cbcd10c00691f06acd9af4a75026">MV_FG_DecodeJpeg</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stDecodeJPEG);</div><div class="line"><span class="keywordflow">if</span>(MV_FG_ERR_IMG_OVERFLOW == nRet)</div><div class="line">{</div><div class="line">    stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a>);</div><div class="line">    stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = stDecodeJPEG.<a class="code" href="struct_m_v___f_g___d_e_c_o_d_e___j_p_e_g___p_a_r_a_m___t.html#a8e7a254718abdb3689156af620f74fee">stOutputImageInfo</a>.<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a>;</div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5135cbcd10c00691f06acd9af4a75026">MV_FG_DecodeJpeg</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp; stDecodeJPEG);</div><div class="line">    Check(nRet);</div><div class="line">}</div></div><!-- fragment -->  </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="chongzutuxiang" class="title">Reconstruct Images</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaef7831d4dee9102a19967981bedf5dfe" title="Reconstruct images.">MV_FG_ReconstructImage()</a> and input image information to rotate (90°/180°/270°), flip (horizontal and vertical), or split images by line. For specific operation modes, you can refer to <a class="el" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gae1ec3a4e32d49a9f6973c18546e7627a">MV_FG_RECONSTRUCT_MODE</a>. Among them, the pixel formats supported for image rotation and image flipping are Mono8/RGB24/BGR24. The image splitting by line should be used in conjunction with the time-sharing exposure function of the line scan camera. The image can be split according to the number of actual exposure values. If the area scan camera is used or the time-sharing exposure function is not enabled, this function will not work.</div><div id="hikvision"> <div class="fragment"><div class="line"><span class="comment">/*Reconstruct the image. Take splitting by line in time-sharing exposure as an example.*/</span></div><div class="line"><a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html">MV_FG_RECONSTRUCT_INFO</a> stReconstructInfo = {0};</div><div class="line"></div><div class="line"><span class="comment">/*Number of exposure values*/</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nExposureNum = 3;</div><div class="line"></div><div class="line">stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>;</div><div class="line">stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#a2e4c6b811457a16b7033af6741cfb1db">nHeight</a>;</div><div class="line">stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#abc1a908f027ad8af045a2ad75df2faa3">enPixelType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ggaf163295ca7ce1c6b384e51346d827b90a1d87c50f3d4a2ab9ee610bd60c2df3e8">MV_FG_PIXEL_TYPE_RGB8_Packed</a>;</div><div class="line">stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ab48e189d395e833f208732a779e526c0">pBuffer</a>;</div><div class="line">stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#aad74022a79f9800f72ba8ad2ced2ea95">stInputImageInfo</a>.<a class="code" href="struct_m_v___f_g___i_n_p_u_t___i_m_a_g_e___i_n_f_o.html#a1dc2e86fcfcb0cfe25b292cc6089169e">nImageBufLen</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a>;</div><div class="line">for (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nExposureNum; i++)</div><div class="line">{</div><div class="line">    stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#a8a512374dfdcd43a11f77f139feaf916">stOutputImageInfo</a>[i].<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a9aa85da046bacbf4b7a2b31e61bf3a47">nImageBufSize</a> = stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a> / nExposureNum;</div><div class="line">    stReconstructInfo.<a class="code" href="struct_m_v___f_g___r_e_c_o_n_s_t_r_u_c_t___i_n_f_o.html#a8a512374dfdcd43a11f77f139feaf916">stOutputImageInfo</a>[i].<a class="code" href="struct_m_v___f_g___o_u_t_p_u_t___i_m_a_g_e___i_n_f_o.html#a0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(stFrameInfo.<a class="code" href="struct_m_v___f_g___b_u_f_f_e_r___i_n_f_o.html#ac1821e4c0315f6c0ebbcf907f835f6f6">nFilledSize</a> / nExposureNum);</div><div class="line">}</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86_xE6_x8E_xA5_xE5_x8F_xA3.html#gaef7831d4dee9102a19967981bedf5dfe">MV_FG_ReconstructImage</a>(hStream<span class="comment">/*hInterface*/</span><span class="comment">/*hDevice*/</span>, &amp;stReconstructInfo);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <br />
 </div> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>