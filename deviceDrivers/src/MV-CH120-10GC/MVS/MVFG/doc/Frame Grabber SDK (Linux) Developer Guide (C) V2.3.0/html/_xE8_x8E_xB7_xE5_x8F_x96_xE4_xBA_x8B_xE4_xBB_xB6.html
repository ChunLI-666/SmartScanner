<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Disclaimer</span></a></li>
      <li><a href="_xE9_xA6_x96_xE9_xA1_xB5.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_s_d_k_xE7_x89_x88_xE6_x9C_xAC_xE6_x9B_xB4_xE6_x96_xB0_xE8_xAE_xB0_xE5_xBD_x95.html"><span>Update&#160;History</span></a></li>
      <li><a href="usergroup0.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference&#160;and&#160;Data&#160;Structure</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F.html"><span>Sample&#160;Program</span></a></li>
      <li><a href="_error_code.html"><span>Error&#160;Code</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Get Events</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Events can be divided into two types: notification events and alarm events, which are both notified to users through callback functions. The notification event is an event sent by the frame grabber/camera in a normal state, which comes from the EventControl attribute of the frame grabber/camera. Alarm events are abnormal events emitted by the frame grabber/camera, which are used to indicate possible exceptions in the frame grabber/camera and remind users to promptly investigate.</div><div id="hikvision"> <ul>
<li>
<a href="#zhengchangtongzhishijian" class="el">Notification Events</a> </li>
<li>
<a href="#yichanggaojingshijian" class="el">Alarm Events</a> </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="zhengchangtongzhishijian" class="title">Notification Events</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Running flow of a notification event for the frame grabber/camera: register, open, get, close, and unregister the event.</div><div id="hikvision"> <ul>
<li>
<b>Register</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#ga07fc0b5e73c3ebe183bb4d8876008a1a" title="Register event callback function.">MV_FG_RegisterEventCallBack()</a> and input the event name to register the event callback function in the SDK. The parameter pUser is for user custom data and will be synchronously output when the event callback function is triggered. The SDK will not restrict the content and usage of the custom data, nor will it make any changes. </li>
<li>
<b>Open</b>: Call <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413" title="Set the information of an enum type node by string.">MV_FG_SetEnumValueByString()</a> and select the event type, event channel, and specific event in sequence, and then open the frame grabber/camera event. Besides, it can also be configured through the frame grabber configuration tool.<br />
 The following sample codes show the process of registering and opening frame grabber events, and the process of camera events is similar:<br />
 <div class="fragment"><div class="line"><span class="comment">/*Register frame grabber start event callback*/</span></div><div class="line"><span class="comment">/*The frame grabber handle can be input in pUser, so that when there are multiple events with the same name, you can distinguish which frame grabber a event belongs to.*/</span></div><div class="line">nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#ga07fc0b5e73c3ebe183bb4d8876008a1a">MV_FG_RegisterEventCallBack</a>(hInterface, <span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>, EventCallBack, hInterface);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Select event type as stream event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventCategory&quot;</span>, <span class="stringliteral">&quot;StreamEvent&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Select event channel as channel 10*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;ChannelSelector&quot;</span>, <span class="stringliteral">&quot;Channel0&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Select event as frame start event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventSelector&quot;</span>,<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Open the frame start event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventNotification&quot;</span>, <span class="stringliteral">&quot;On&quot;</span>);</div><div class="line">Check(nRet);</div></div><!-- fragment --> </li>
<li>
<b>Get</b>: When the frame grabber generates an event, the corresponding event callback function will be triggered to push the event information to the user. In general, the event information pushed to users will include key information such as event name, event ID, and timestamp. Other information such as frame No. and event data is not necessary, and might be different for different events. Note that it is not recommended to perform time-consuming operations in event callback functions, as this will block the push of subsequent event information.<br />
 The following sample codes show the content of event callback function push.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Event callback function*/</span></div><div class="line"><span class="keywordtype">void</span> __stdcall EventCallBack(<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html">MV_FG_EVENT_INFO</a>* pstEventInfo, <span class="keywordtype">void</span>* pUser)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Event name: %s, Event ID: 0x%x, Timestamp: %I64d\r\n&quot;</span>, pstEventInfo-&gt;<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html#abe05b52b85057a57952c0bffe8c82e5b">EventName</a>, pstEventInfo-&gt;<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html#a130c8c2fd6e7a157c4a7e83ea481da98">nEventID</a>, pstEventInfo-&gt;<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html#a3b22df5abbea9a7daa7a6d941cf454d8">nTimestamp</a>);</div><div class="line">    <span class="keywordflow">if</span>(pEventData)</div><div class="line">    {</div><div class="line">        <span class="comment">/*When the callback function ends, the buffer pointed by the event data will be released by the SDK, so you might have to make a copy of it promptly.*/</span></div><div class="line">        memcpy(pBuffer, pstEventInfo-&gt;<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html#a46bacad7de0049c46da8a84c68648c9e">pEventData</a>, pstEventInfo-&gt;<a class="code" href="struct_m_v___f_g___e_v_e_n_t___i_n_f_o.html#a2a1b57f70fde36d123ff60b0639de4db">nEventDataSize</a>);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<b>Close</b>: To close an event, call <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413" title="Set the information of an enum type node by string.">MV_FG_SetEnumValueByString()</a> and select the event type, event channel, and specific event in sequence to close it. </li>
<li>
<b>Unregister</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#ga07fc0b5e73c3ebe183bb4d8876008a1a" title="Register event callback function.">MV_FG_RegisterEventCallBack()</a> and input the event name, set the callback function parameter to NULL to unregister the corresponding event callback function. This step is not necessary, because after closing the frame grabber, the SDK will automatically unregister the callback function for this event.<br />
 The following sample codes show the process of closing and unregistering an event.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Select event type as stream event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventCategory&quot;</span>, <span class="stringliteral">&quot;StreamEvent&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Select event channel as channel 10*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;ChannelSelector&quot;</span>, <span class="stringliteral">&quot;Channel0&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Select event as frame start event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventSelector&quot;</span>,<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Close the frame start event*/</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE_xE6_x8E_xA5_xE5_x8F_xA3.html#ga5d3608599b1901c97ddd376d3eef3413">MV_FG_SetEnumValueByString</a>(hInterface, <span class="stringliteral">&quot;EventNotification&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">/*Unregister the frame start event callback*/</span></div><div class="line">nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#ga07fc0b5e73c3ebe183bb4d8876008a1a">MV_FG_RegisterEventCallBack</a>(hInterface, <span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>, NULL, NULL);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
</ul>
<br />
 </div><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div id="yichanggaojingshijian" class="title">Alarm Events</div> </div> </div> <div id="hikvision"> <br />
 </div><div id="hikvision">Running flow of an alarm event for the frame grabber/camera: register, get, and unregister the event.</div><div id="hikvision"> <ul>
<li>
<b>Register</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#gabd1bfa4436431a9ba963ffd3c45deb58" title="Register exception information callback function.">MV_FG_RegisterExceptionCallBack()</a> to register the callback function for exception alarm events within the SDK. After registration, all supported exception events will be pushed to the user through this callback function.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Register alarm event callback for frame grabber/camera*/</span></div><div class="line"><span class="comment">/*The frame grabber handle can be input in pUser, so that when there are multiple events with the same name, you can distinguish which frame grabber a event belongs to.*/</span></div><div class="line">nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#gabd1bfa4436431a9ba963ffd3c45deb58">MV_FG_RegisterExceptionCallBack</a>(hInterface<span class="comment">/*hDevice*/</span>, ExceptionCallBack, hInterface<span class="comment">/*hDevice*/</span>);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
<li>
<b>Get</b>: When the frame grabber/camera generates an exception, it will trigger the alarm event callback function, pushing the type of the alarm event to the user. For specific types of exception events, refer to <a class="el" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ga7e08c9940c563602d3be23ce3e54cf88">MV_FG_EXCEPTION_TYPE</a>. Note that it is not recommended to perform time-consuming operations in the exception event callback function, as this will block the push of subsequent events.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Exception alarm event callback function*/</span></div><div class="line"><span class="keywordtype">void</span> __stdcall ExceptionCallBack(<a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gaab47165761b85c42ca717e7940e375a8">MV_FG_EXCEPTION_TYPE</a> enExceptionType, <span class="keywordtype">void</span>* pUser)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Exception type: 0x%x\r\n&quot;</span>, enExceptionType);</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<b>Unregister</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#gabd1bfa4436431a9ba963ffd3c45deb58" title="Register exception information callback function.">MV_FG_RegisterExceptionCallBack()</a> and set the callback function parameter to NULL to unregister the exception event callback function. This step is not necessary because after closing the frame grabber/camera, the SDK will automatically unregister the callback function for exception events.<br />
 <div class="fragment"><div class="line"><span class="comment">/*Unregister frame grabber/camera exception alarm event callback*/</span></div><div class="line">nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE6_x8E_xA5_xE5_x8F_xA3.html#gabd1bfa4436431a9ba963ffd3c45deb58">MV_FG_RegisterExceptionCallBack</a>(hInterface<span class="comment">/*hDevice*/</span>, NULL, NULL);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
</ul>
<br />
 </div> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>